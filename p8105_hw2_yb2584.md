Homework 2
================
Yunshen Bai
2023-10-01

## Problem 0

``` r
library(tidyverse)
library(readxl)
```

## Problem 1

First, clean the data in pols-month.csv.

``` r
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

pols = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

Second, clean the data in snp.csv using a similar process to the above.

``` r
snp = 
  read_csv("./data/fivethirtyeight_datasets/snp.csv") |>
  separate(date, into = c("month", "day", "year"), convert = TRUE) |>
  mutate(
    year = ifelse(year>=50, 1900+year, 2000+year), 
  )|>
  arrange(year, month) |>
  mutate(month = month.name[month]) |>
  select(year, month, close) 
```

Third, tidy the unemployment data so that it can be merged with the
previous datasets.

``` r
unemployment = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(y = month_df) |> 
  select(year, month, unemployment)
```

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
data_538 = 
  left_join(pols, snp) |>
  left_join(y = unemployment)

str(data_538)
## tibble [822 x 13] (S3: tbl_df/tbl/data.frame)
##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
##  $ month       : chr [1:822] "January" "February" "March" "April" ...
##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
##  $ president   : chr [1:822] "dem" "dem" "dem" "dem" ...
##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...
```

Notice that there are some `NA` values in the `close` and `unemployment`
variables, which indicate that the value of these variables is missing
at those locations.

Let’s talk about the 538 datasets. The `pols` data has 822 observations
and 11 variables and tells us about the party affiliation distribution
(democrat or republican) for governors and senators for a given year
from years 1947 to 2015. It also tells us whether the sitting president
was a democrat or republican. The `snp` data has 787 observations and 3
variables, ranging from years 1950 to 2015. The `unemployment` data has
816 observations and 3 variables ranging from years 1948 to 2015. In
Januarys in or after 1975 in which a democrat was president, the
**average unemployment rate was 6.57**. The average unemployment rate
over the same time period in which a republican was president was 6.47.

## Problem 2

Read and clean the Mr. Trash Wheel sheet

``` r
mr_trash_wheel=
  read_excel("./data/202207 Trash Wheel Collection Data.xlsx",sheet = 1,skip = 1)|>
  janitor::clean_names()|>
  drop_na(dumpster)|>
  select(-x15,-x16)|>
  mutate(homes_powered=weight_tons*500/30)
```

Use a similar process to import, clean, and organize the data for
Professor Trash Wheel and Gwynnda

``` r
professor_trash_wheel=
  read_excel("./data/202207 Trash Wheel Collection Data.xlsx",sheet = 2,skip = 1)|>
  janitor::clean_names()|>
  drop_na(dumpster)|>
  mutate(homes_powered=weight_tons*500/30)
```

``` r
Gwynnda=
  read_excel("./data/202207 Trash Wheel Collection Data.xlsx",sheet = 4,skip = 1)|>
  janitor::clean_names()|>
  drop_na(dumpster)|>
  mutate(homes_powered=weight_tons*500/30)
```

Next, combine these with the Mr. Trash Wheel dataset to produce a single
tidy dataset

``` r
mr_trash_wheel=mutate(mr_trash_wheel,belongs="Mr. Trash Wheel")
professor_trash_wheel=mutate(professor_trash_wheel,belongs="Professor Trash Wheel")
Gwynnda=mutate(Gwynnda,belongs="Gwynnda")
mr_trash_wheel=mutate(mr_trash_wheel,year=as.double(year))
trash_wheel=full_join(mr_trash_wheel,professor_trash_wheel)
trash_wheel=full_join(trash_wheel,Gwynnda)
```

These data includes information on the dumpter number, date of
collection, amount of total litter and litter type. The overall average
home powered is 50.1842927. The `mr_trash_wheel` data has 547
observations and 15 variables, and home powered for Mr. Trash Wheel is
53.2711761. The `professor_trash_wheel` data has 94 observations and 14
variables, and home powered for Professor Trash Wheel is 33.7092199. The
`Gwynnda` data has 106 observations and 12 variables, and home powered
for Professor Trash Wheel is 48.8647799. The total weight of trash
collected by Professor Trash Wheel is 190.12, and total number of
cigarette butts collected by Gwynnda in July of 2021 is 1.63^{4}.

## Problem 3
